<h1>注文履歴詳細画面</h1>

<div>
  <p>注文情報</p>
  <table>
    <thead>
      <tr>
        <th>注文日</th>
        <th>配送先</th>
        <th>支払方法</th>
      </tr>
    </thead>
      <tbody>
        <tr>
          <td><%= @order.created_at.strftime('%Y/%m/%d') %></td>
          <td>
            〒<%= @order.shipping_postal_code %>
            <%= @order.shipping_adddress %>
            <%= @order.delivery_name %>
          </td>
          <td><%= @order.method_of_payment_i18n %></td>
        </tr>
      </tbody>
  </table>
</div>

<div>
  <p>請求情報</p>
  <table>
    <thead>
      <tr>
        <th>商品合計</th>
        <th>配送料</th>
        <th>ご請求金額</th>
      </tr>
    </thead>
      <tbody>
        <tr>
          <td><%= (@order.payment_amount - @order.postage).to_s(:delimited) %></td>
          <td><%= @order.postage %></td>
          <td><%= @order.payment_amount.to_s(:delimited) %></td>
        </tr>
      </tbody>
  </table>
</div>

<div>
  <p>注文内容</p>
  <table>
    <tr>
      <th>商品名</th>
      <th>単価(税込)</th>
      <th>数量</th>
      <th>小計</th>
    </tr>
    <% total = 0 %>
      <% @order_details.each do |order_detail| %>
        <tr>
          <td><%= order_detail.item.name %></td>
          <td><%= (order_detail.tax_price).to_i %></td>
          <td><%= order_detail.amount %></td>
          <td><%= (order_detail.tax_price*order_detail.amount).floor.to_s(:delimited) %></td>
        </tr>
      <% end %>
  </table>
</div>
